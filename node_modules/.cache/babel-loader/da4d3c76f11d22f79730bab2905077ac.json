{"remainingRequest":"/Users/xufei/Desktop/FlowModel/node_modules/babel-loader/lib/index.js!/Users/xufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xufei/Desktop/FlowModel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xufei/Desktop/FlowModel/src/components/create/RuleEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xufei/Desktop/FlowModel/src/components/create/RuleEdit.vue","mtime":1653708835747},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js","mtime":1653708689072},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/babel-loader/lib/index.js","mtime":1653708688758},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js","mtime":1653708689072},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/vue-loader/lib/index.js","mtime":1653708694636}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3h1ZmVpL0Rlc2t0b3AvRmxvd01vZGVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwoKdmFyIGFudGxyNCA9IHJlcXVpcmUoImFudGxyNCIpOwoKdmFyIElucHV0U3RyZWFtID0gYW50bHI0LklucHV0U3RyZWFtOwp2YXIgQ29tbW9uVG9rZW5TdHJlYW0gPSBhbnRscjQuQ29tbW9uVG9rZW5TdHJlYW07Cgp2YXIgR3JhbW1hclBhcnNlciA9IHJlcXVpcmUoIi4uLy4uL3BhcnNlci9Qcm9wZXJ0eVBhcnNlciIpLlByb3BlcnR5UGFyc2VyOwoKdmFyIEdyYW1tYXJMZXhlciA9IHJlcXVpcmUoIi4uLy4uL3BhcnNlci9Qcm9wZXJ0eUxleGVyIikuUHJvcGVydHlMZXhlcjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbmV3UnVsZTogbnVsbCwKICAgICAgbG9hZGVkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyhbIlNBVkVfRURJVF9SVUxFIl0pLCB7CiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KCkgewogICAgICAvLyDmr4/mrKHnvJbovpHlrowgLyDkv67mlLnlrowgcHJvcGVydHkg5LmL5ZCO77yMcHJvcGVydHkg55qEIHN0YXR1cyDlupTph43nva7kuLogZmFsc2UKICAgICAgdGhpcy5uZXdSdWxlLnN0YXR1cyA9IGZhbHNlOwoKICAgICAgdHJ5IHsKICAgICAgICAvLyDlr7nkuo7nlKjmiLfovpPlhaXnmoQgcHJvcGVydHkg6L+b6KGM6K+t5rOV5qOA5p+lCiAgICAgICAgdmFyIGlucHV0U3RyZWFtID0gbmV3IElucHV0U3RyZWFtKHRoaXMubmV3UnVsZS5jb250ZW50KTsKICAgICAgICB2YXIgbGV4ZXIgPSBuZXcgR3JhbW1hckxleGVyKGlucHV0U3RyZWFtKTsKICAgICAgICB2YXIgdG9rZW5TdHJlYW0gPSBuZXcgQ29tbW9uVG9rZW5TdHJlYW0obGV4ZXIpOwogICAgICAgIHZhciBwYXJzZXIgPSBuZXcgR3JhbW1hclBhcnNlcih0b2tlblN0cmVhbSk7CiAgICAgICAgcGFyc2VyLnJlbW92ZUVycm9yTGlzdGVuZXJzKCk7CiAgICAgICAgcGFyc2VyLmFkZEVycm9yTGlzdGVuZXIoewogICAgICAgICAgc3ludGF4RXJyb3I6IGZ1bmN0aW9uIHN5bnRheEVycm9yKHJlY29nbml6ZXIsIG9mZmVuZGluZ1N5bWJvbCwgbGluZSwgY29sdW1uLCBtc2csIGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCIiLmNvbmNhdChvZmZlbmRpbmdTeW1ib2wsICIgbGluZSAiKS5jb25jYXQobGluZSwgIiwgY29sICIpLmNvbmNhdChjb2x1bW4sICI6ICIpLmNvbmNhdChtc2cpKTsKICAgICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciB0cmVlID0gcGFyc2VyLmNoZWNrKCk7IC8vIOivreazleajgOafpemAmui/h+WQju+8jOS/neWtmCBwcm9wZXJ0eQoKICAgICAgICB0aGlzLlNBVkVfRURJVF9SVUxFKHRoaXMubmV3UnVsZSk7CiAgICAgICAgdGhpcy5ydWxlRWRpdFNob3cuc2hvdyA9IGZhbHNlOwogICAgICB9IGNhdGNoIChfdW51c2VkKSB7CiAgICAgICAgYWxlcnQoIldyb25nIEdyYW1tYXIhIik7CiAgICAgIH0KICAgIH0KICB9KSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWyJydWxlRWRpdFNob3ciLCAiZWRpdFJ1bGUiLCAicnVsZUxpc3RzIl0pKSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKCF0aGlzLnJ1bGVFZGl0U2hvdy5hZGQpIHsKICAgICAgdGhpcy5uZXdSdWxlID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5lZGl0UnVsZSk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbmV3SWQgPSAwOwoKICAgICAgaWYgKHRoaXMucnVsZUxpc3RzLmxlbmd0aCA9PSAwKSB7fSBlbHNlIHsKICAgICAgICBuZXdJZCA9IHRoaXMucnVsZUxpc3RzW3RoaXMucnVsZUxpc3RzLmxlbmd0aCAtIDFdLmlkICsgMTsKICAgICAgfQoKICAgICAgdGhpcy5uZXdSdWxlID0gewogICAgICAgIGlkOiBuZXdJZCwKICAgICAgICBsYWJlbDogIiIsCiAgICAgICAgY29udGVudDogIiIsCiAgICAgICAgc3RhdHVzOiBmYWxzZQogICAgICB9OwogICAgfQoKICAgIHRoaXMubG9hZGVkID0gdHJ1ZTsKICB9Cn07"},{"version":3,"sources":["RuleEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,SAAA,QAAA,EAAA,YAAA,QAAA,MAAA;;AAEA,IAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AACA,IAAA,WAAA,GAAA,MAAA,CAAA,WAAA;AACA,IAAA,iBAAA,GAAA,MAAA,CAAA,iBAAA;;AACA,IAAA,aAAA,GAAA,OAAA,CAAA,6BAAA,CAAA,CAAA,cAAA;;AACA,IAAA,YAAA,GAAA,OAAA,CAAA,4BAAA,CAAA,CAAA,aAAA;;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,IADA;AAEA,MAAA,MAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAAA,oBACA,YAAA,CAAA,CAAA,gBAAA,CAAA,CADA;AAEA,IAAA,IAFA,kBAEA;AACA;AACA,WAAA,OAAA,CAAA,MAAA,GAAA,KAAA;;AACA,UAAA;AACA;AACA,YAAA,WAAA,GAAA,IAAA,WAAA,CAAA,KAAA,OAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,GAAA,IAAA,YAAA,CAAA,WAAA,CAAA;AACA,YAAA,WAAA,GAAA,IAAA,iBAAA,CAAA,KAAA,CAAA;AACA,YAAA,MAAA,GAAA,IAAA,aAAA,CAAA,WAAA,CAAA;AACA,QAAA,MAAA,CAAA,oBAAA;AACA,QAAA,MAAA,CAAA,gBAAA,CAAA;AACA,UAAA,WAAA,EAAA,qBAAA,UAAA,EAAA,eAAA,EAAA,IAAA,EAAA,MAAA,EAAA,GAAA,EAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,KAAA,WAAA,eAAA,mBAAA,IAAA,mBAAA,MAAA,eAAA,GAAA;AACA,kBAAA,GAAA;AACA;AAJA,SAAA;AAMA,YAAA,IAAA,GAAA,MAAA,CAAA,KAAA,EAAA,CAbA,CAeA;;AACA,aAAA,cAAA,CAAA,KAAA,OAAA;AACA,aAAA,YAAA,CAAA,IAAA,GAAA,KAAA;AACA,OAlBA,CAkBA,gBAAA;AACA,QAAA,KAAA,CAAA,gBAAA,CAAA;AACA;AAEA;AA3BA,IAPA;AAoCA,EAAA,QAAA,oBACA,QAAA,CAAA,CAAA,cAAA,EAAA,UAAA,EAAA,WAAA,CAAA,CADA,CApCA;AAuCA,EAAA,OAvCA,qBAuCA;AACA,QAAA,CAAA,KAAA,YAAA,CAAA,GAAA,EAAA;AACA,WAAA,OAAA,GAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,KAAA,QAAA,CAAA;AACA,KAFA,MAEA;AACA,UAAA,KAAA,GAAA,CAAA;;AACA,UAAA,KAAA,SAAA,CAAA,MAAA,IAAA,CAAA,EAAA,CACA,CADA,MACA;AACA,QAAA,KAAA,GAAA,KAAA,SAAA,CAAA,KAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EAAA,EAAA,GAAA,CAAA;AACA;;AAEA,WAAA,OAAA,GAAA;AAAA,QAAA,EAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,OAAA,EAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA;AACA;;AACA,SAAA,MAAA,GAAA,IAAA;AACA;AApDA,CAAA","sourcesContent":["<template >\n  <div>\n    <div class=\"rule-edit-container\" v-if=\"loaded\">\n      <el-dialog\n        title=\"Property Edit\"\n        :visible.sync=\"ruleEditShow.show\"\n        width=\"30%\"\n      >\n        <div class=\"name\">\n          <span>Property Name:</span\n          ><el-input\n            class=\"name-input\"\n            v-model=\"newRule.label\"\n            placeholder=\"\"\n          ></el-input>\n        </div>\n\n        <div class=\"content\">\n          <span>Property Content:</span>\n          <el-input\n            class=\"content-input\"\n            v-model=\"newRule.content\"\n            placeholder=\"\"\n          ></el-input>\n        </div>\n\n        <span slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"ruleEditShow.show = false\">Cancel</el-button>\n          <el-button type=\"primary\" @click=\"edit()\">Confirm</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState, mapMutations } from \"vuex\";\n\nconst antlr4 = require(\"antlr4\");\nconst InputStream = antlr4.InputStream;\nconst CommonTokenStream = antlr4.CommonTokenStream;\nconst GrammarParser = require(\"../../parser/PropertyParser\").PropertyParser;\nconst GrammarLexer = require(\"../../parser/PropertyLexer\").PropertyLexer;\n\nexport default {\n  data() {\n    return {\n      newRule: null,\n      loaded: false,\n    };\n  },\n  methods: {\n    ...mapMutations([\"SAVE_EDIT_RULE\"]),\n    edit() {\n      // 每次编辑完 / 修改完 property 之后，property 的 status 应重置为 false\n      this.newRule.status = false;\n      try {\n        // 对于用户输入的 property 进行语法检查\n        const inputStream = new InputStream(this.newRule.content);\n        const lexer = new GrammarLexer(inputStream);\n        const tokenStream = new CommonTokenStream(lexer);\n        const parser = new GrammarParser(tokenStream);\n        parser.removeErrorListeners();\n        parser.addErrorListener({\n          syntaxError: (recognizer, offendingSymbol, line, column, msg, err) => {\n            console.error(`${offendingSymbol} line ${line}, col ${column}: ${msg}`);\n            throw err;\n          }\n        });\n        const tree = parser.check();\n\n        // 语法检查通过后，保存 property\n        this.SAVE_EDIT_RULE(this.newRule);\n        this.ruleEditShow.show = false;\n      } catch {\n        alert(\"Wrong Grammar!\");\n      }\n      \n    },\n  },\n  computed: {\n    ...mapState([\"ruleEditShow\", \"editRule\", \"ruleLists\"]),\n  },\n  mounted() {\n    if (!this.ruleEditShow.add) {\n      this.newRule = Object.assign({}, this.editRule);\n    } else {\n      let newId = 0;\n      if (this.ruleLists.length == 0) {\n      } else {\n        newId = this.ruleLists[this.ruleLists.length - 1].id + 1;\n      }\n\n      this.newRule = { id: newId, label: \"\", content: \"\", status: false };\n    }\n    this.loaded = true;\n  },\n};\n</script>\n<style lang=\"scss\">\n.rule-edit-container {\n  width: 400px;\n  .el-dialog {\n    border-radius: 20px;\n  }\n  .name {\n    .name-input {\n      margin-left: 20px;\n      width: 300px;\n    }\n  }\n  .content {\n    margin-top: 20px;\n    .content-input {\n      margin-left: 10px;\n      width: 300px;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/components/create"}]}