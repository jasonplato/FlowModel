{"remainingRequest":"/Users/xufei/Desktop/FlowModel/node_modules/babel-loader/lib/index.js!/Users/xufei/Desktop/FlowModel/node_modules/eslint-loader/index.js??ref--13-0!/Users/xufei/Desktop/FlowModel/src/api/web3/contracts.js","dependencies":[{"path":"/Users/xufei/Desktop/FlowModel/src/api/web3/contracts.js","mtime":1653708835755},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js","mtime":1653708689072},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/babel-loader/lib/index.js","mtime":1653708688758},{"path":"/Users/xufei/Desktop/FlowModel/node_modules/eslint-loader/index.js","mtime":1653708690128}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveHVmZWkvRGVza3RvcC9GbG93TW9kZWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBldGhlcnMgfSBmcm9tICdldGhlcnMnOwppbXBvcnQgRmxvd0luc2lnaHRFUkM3MjFORlQgZnJvbSAiLi9GbG93SW5zaWdodEVSQzcyMU5GVC5qc29uIjsKaW1wb3J0IEZsb3dJbnNpZ2h0VmF1bHQgZnJvbSAiLi9GbG93SW5zaWdodFZhdWx0Lmpzb24iOwppbXBvcnQgRmxvd0luc2lnaHRNYXJrZXRwbGFjZSBmcm9tICIuL0Zsb3dJbnNpZ2h0TWFya2V0cGxhY2UuanNvbiI7CnZhciBjb250cmFjdF9hZGRyZXNzID0gIjB4NkMzODM4QzY2NzcwOTI3ZTBlZUM1N2ZDYTU1MEIxZDY1MWU1ZGE4ZSI7CnZhciBtYXJrZXRwbGFjZV9hZGRyZXNzID0gIjB4MjUyOEExOTE2NDA2MzhEY0Y2RmFmZUU1MUU5NTk0NkVFMzc0QzY0MSI7CnZhciB2YXVsdF9hZGRyZXNzID0gIjB4REQ0OTVjQjJDZDdCRkE2MTZlQjFGNzRBNzBFNDdGNWM4ZjI5OUJEZiI7CnZhciBjb250cmFjdCA9IG51bGw7CnZhciB2YXVsdCA9IG51bGw7CnZhciBtYXJrZXRwbGFjZSA9IG51bGw7IC8v6I635Y+WIG1ldGFtYXNrIHByb3ZpZGVyCgpmdW5jdGlvbiBnZXRXZWIzUHJvdmlkZXIoKSB7CiAgaWYgKCF3aW5kb3cud2ViM1Byb3ZpZGVyKSB7CiAgICBpZiAoIXdpbmRvdy5ldGhlcmV1bSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICB3aW5kb3cud2ViM1Byb3ZpZGVyID0gbmV3IGV0aGVycy5wcm92aWRlcnMuV2ViM1Byb3ZpZGVyKHdpbmRvdy5ldGhlcmV1bSwgImFueSIpOwogIH0KCiAgcmV0dXJuIHdpbmRvdy53ZWIzUHJvdmlkZXI7Cn0gLy/ov57mjqVtZXRhbWFzawoKCmZ1bmN0aW9uIGNvbm5lY3RNZXRhbWFzayhfeCkgewogIHJldHVybiBfY29ubmVjdE1ldGFtYXNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy/nm5HlkKzotKbmiLfliIfmjaIKCgpmdW5jdGlvbiBfY29ubmVjdE1ldGFtYXNrKCkgewogIF9jb25uZWN0TWV0YW1hc2sgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocHJvdmlkZXIpIHsKICAgIHZhciBhY2NvdW50LCBjaGFpbklkOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIShwcm92aWRlciA9PT0gbnVsbCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoewogICAgICAgICAgICAgIG1ldGhvZDogJ2V0aF9yZXF1ZXN0QWNjb3VudHMnCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgYWNjb3VudCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoewogICAgICAgICAgICAgIG1ldGhvZDogJ2V0aF9jaGFpbklkJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIGNoYWluSWQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBjb250cmFjdCA9IG5ldyBldGhlcnMuQ29udHJhY3QoY29udHJhY3RfYWRkcmVzcywgRmxvd0luc2lnaHRFUkM3MjFORlQuYWJpLCB3aW5kb3cud2ViM1Byb3ZpZGVyLmdldFNpZ25lcigpKTsKICAgICAgICAgICAgdmF1bHQgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KHZhdWx0X2FkZHJlc3MsIEZsb3dJbnNpZ2h0VmF1bHQuYWJpLCB3aW5kb3cud2ViM1Byb3ZpZGVyLmdldFNpZ25lcigpKTsKICAgICAgICAgICAgbWFya2V0cGxhY2UgPSBuZXcgZXRoZXJzLkNvbnRyYWN0KG1hcmtldHBsYWNlX2FkZHJlc3MsIEZsb3dJbnNpZ2h0TWFya2V0cGxhY2UuYWJpLCB3aW5kb3cud2ViM1Byb3ZpZGVyLmdldFNpZ25lcigpKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIGFjY291bnQ6IGFjY291bnQsCiAgICAgICAgICAgICAgY2hhaW5JZDogY2hhaW5JZCwKICAgICAgICAgICAgICBzdGF0dXM6IHRydWUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZ2V0IGEgd2FsbGV0IGNvbm5lY3Rpb24uJywgX2NvbnRleHQudDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDE1XV0pOwogIH0pKTsKICByZXR1cm4gX2Nvbm5lY3RNZXRhbWFzay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBhY2NvdW50Q2hhbmdlTGlzdGVuZXIoZm4pIHsKICB3aW5kb3cuZXRoZXJldW0ub24oJ2FjY291bnRzQ2hhbmdlZCcsIGZuKTsKfSAvL+iOt+WPluWvueW6lGlkIG5mdOWFg+aVsOaNrgoKCmZ1bmN0aW9uIGdldE5mdE1ldGFkYXRhKF94MikgewogIHJldHVybiBfZ2V0TmZ0TWV0YWRhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvL+iOt+WPlui0puaIt+S9meminQoKCmZ1bmN0aW9uIF9nZXROZnRNZXRhZGF0YSgpIHsKICBfZ2V0TmZ0TWV0YWRhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGlkKSB7CiAgICB2YXIgdHg7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5nZXRORlRNZXRhZGF0YShpZCk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0eCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgaWYgKCEodHggIT0gIiIpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3NlZCIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IHR4CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBzdGF0dXM6ICJmYWlsZWQiLAogICAgICAgICAgICAgIHJlc3BvbnNlOiBudWxsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX2dldE5mdE1ldGFkYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGdldEJhbGFuY2UoX3gzKSB7CiAgcmV0dXJuIF9nZXRCYWxhbmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy/liJvlu7puZnQKCgpmdW5jdGlvbiBfZ2V0QmFsYW5jZSgpIHsKICBfZ2V0QmFsYW5jZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoYWRkcmVzcykgewogICAgdmFyIGJhbGFuY2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiB3aW5kb3cud2ViM1Byb3ZpZGVyLmdldEJhbGFuY2UoYWRkcmVzcyk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBiYWxhbmNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBldGhlcnMudXRpbHMuZm9ybWF0RXRoZXIoYmFsYW5jZSkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX2dldEJhbGFuY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gY3JlYXRlTkZUKF94NCwgX3g1LCBfeDYsIF94NywgX3g4LCBfeDksIF94MTApIHsKICByZXR1cm4gX2NyZWF0ZU5GVC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9IC8v5re75YqgCgoKZnVuY3Rpb24gX2NyZWF0ZU5GVCgpIHsKICBfY3JlYXRlTkZUID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCh0bywgbmFtZSwgcGljVVJMLCBkZXNjLCBwcm9wZXJ0eSwga2V5LCBwcml2VVJMKSB7CiAgICB2YXIgdHgsIGV2ZW50RmlsdGVyLCBldmVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDA7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LmNyZWF0ZU5GVCh0bywgbmFtZSwgcGljVVJMLCBkZXNjLCBwcm9wZXJ0eSwga2V5LCBwcml2VVJMKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHR4ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIHR4LndhaXQoKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIHR4ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIGV2ZW50RmlsdGVyID0gY29udHJhY3QuZmlsdGVycy5ORlRDcmVhdGVkKCk7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5xdWVyeUZpbHRlcihldmVudEZpbHRlciwgdHguYmxvY2tOdW1iZXIsICJsYXRlc3QiKTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBldmVudHMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICByZXNwb25zZTogewogICAgICAgICAgICAgICAgaWQ6IGV2ZW50c1swXS5hcmdzWzBdLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICBvd25lcjogZXZlbnRzWzBdLmFyZ3NbMV0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDQudDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogImZhaWxlZCIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IG51bGwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMCwgMTRdXSk7CiAgfSkpOwogIHJldHVybiBfY3JlYXRlTkZULmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGFkZE1pbnRlcihfeDExKSB7CiAgcmV0dXJuIF9hZGRNaW50ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfSAvL+enu+mZpAoKCmZ1bmN0aW9uIF9hZGRNaW50ZXIoKSB7CiAgX2FkZE1pbnRlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUodXNlcikgewogICAgdmFyIHR4OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5hZGRNaW50ZXIodXNlcik7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICB0eCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3NlZCIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IHR4CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgc3RhdHVzOiAiZmFpbGVkIiwKICAgICAgICAgICAgICByZXNwb25zZTogbnVsbAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKICByZXR1cm4gX2FkZE1pbnRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiByZW1vdmVNaW50ZXIoX3gxMikgewogIHJldHVybiBfcmVtb3ZlTWludGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8gVE9ETyAoWHVmZWkpIOaKiuS4iumdoiBjcmVhdGVORlQg55uR5ZCs6YOo5YiG5ZKM6L+Z6YeM55qE5pW05ZCI5oiQ5LiA5Lu95Luj56CBCi8vIOebkeWQrOS6i+S7tgoKCmZ1bmN0aW9uIF9yZW1vdmVNaW50ZXIoKSB7CiAgX3JlbW92ZU1pbnRlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYodXNlcikgewogICAgdmFyIHR4OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSAwOwogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBjb250cmFjdC5hZGRNaW50ZXIodXNlcik7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICB0eCA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3NlZCIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IHR4CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgX2NvbnRleHQ2LnByZXYgPSA3OwogICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oMCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgc3RhdHVzOiAiZmFpbGVkIiwKICAgICAgICAgICAgICByZXNwb25zZTogbnVsbAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNiwgbnVsbCwgW1swLCA3XV0pOwogIH0pKTsKICByZXR1cm4gX3JlbW92ZU1pbnRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBMaXN0ZW4oX3gxMykgewogIHJldHVybiBfTGlzdGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9MaXN0ZW4oKSB7CiAgX0xpc3RlbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoY29udHJhY3QpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbnRyYWN0Lm9uKCJORlRDcmVhdGVkIiwgZnVuY3Rpb24gKF9GbG93SW5zaWdodElkLCBfdG8pIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiaWQ6IiwgX0Zsb3dJbnNpZ2h0SWQudG9TdHJpbmcoKSwgIjsgdG86IiwgX3RvKTsKCiAgICAgICAgICAgICAgdmFyIGlkID0gX0Zsb3dJbnNpZ2h0SWQudG9TdHJpbmcoKTsKCiAgICAgICAgICAgICAgdmFyIG93bmVyID0gX3RvOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCIxIiwgaWQsIG93bmVyKTsKICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgb3duZXI6IG93bmVyCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlNyk7CiAgfSkpOwogIHJldHVybiBfTGlzdGVuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIGFwcHJvdmVORlQoKSB7CiAgcmV0dXJuIF9hcHByb3ZlTkZULmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9hcHByb3ZlTkZUKCkgewogIF9hcHByb3ZlTkZUID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgIHZhciB0eCwgZXZlbnRGaWx0ZXIsIGV2ZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMDsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY29udHJhY3Quc2V0QXBwcm92YWxGb3JBbGwobWFya2V0cGxhY2VfYWRkcmVzcywgdHJ1ZSk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICB0eCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiB0eC53YWl0KCk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICB0eCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICBldmVudEZpbHRlciA9IGNvbnRyYWN0LmZpbHRlcnMuQXBwcm92YWxGb3JBbGwoKTsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDsKICAgICAgICAgICAgcmV0dXJuIGNvbnRyYWN0LnF1ZXJ5RmlsdGVyKGV2ZW50RmlsdGVyLCB0eC5ibG9ja051bWJlciwgImxhdGVzdCIpOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGV2ZW50cyA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIHJlc3BvbnNlOiB7CiAgICAgICAgICAgICAgICBvd25lcjogZXZlbnRzWzBdLmFyZ3NbMF0sCiAgICAgICAgICAgICAgICBvcGVyYXRvcjogZXZlbnRzWzBdLmFyZ3NbMV0sCiAgICAgICAgICAgICAgICBzdGF0ZTogZXZlbnRzWzBdLmFyZ3NbMl0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMTQ7CiAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IF9jb250ZXh0OFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDgudDApOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgIHN0YXR1czogImZhaWxlZCIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IG51bGwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTgsIG51bGwsIFtbMCwgMTRdXSk7CiAgfSkpOwogIHJldHVybiBfYXBwcm92ZU5GVC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiByZWdpc3Rlck5GVFNhbGUoX3gxNCkgewogIHJldHVybiBfcmVnaXN0ZXJORlRTYWxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9yZWdpc3Rlck5GVFNhbGUoKSB7CiAgX3JlZ2lzdGVyTkZUU2FsZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkobmZ0SWQpIHsKICAgIHZhciB0eCwgZXZlbnRGaWx0ZXIsIGV2ZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMDsKICAgICAgICAgICAgY29uc29sZS5sb2coIjAwMCIpOwogICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBtYXJrZXRwbGFjZS5yZWdpc3Rlck5GVFNhbGUoTnVtYmVyKG5mdElkKSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICB0eCA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiB0eC53YWl0KCk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICB0eCA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICBjb25zb2xlLmxvZygiMTExIik7CiAgICAgICAgICAgIGV2ZW50RmlsdGVyID0gY29udHJhY3QuZmlsdGVycy5BcHByb3ZhbCgpOwogICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gY29udHJhY3QucXVlcnlGaWx0ZXIoZXZlbnRGaWx0ZXIsIHR4LmJsb2NrTnVtYmVyLCAibGF0ZXN0Iik7CgogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgZXZlbnRzID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCIyMjIiKTsKICAgICAgICAgICAgY29uc29sZS5sb2coImV2ZW50OiIsIGV2ZW50cyk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgc3RhdHVzOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgcmVzcG9uc2U6IHsKICAgICAgICAgICAgICAgIG93bmVyOiBldmVudHNbMF0uYXJnc1swXSwKICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBldmVudHNbMF0uYXJnc1sxXSwKICAgICAgICAgICAgICAgIG5mdElkOiBldmVudHNbMF0uYXJnc1syXQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAxODsKICAgICAgICAgICAgX2NvbnRleHQ5LnQwID0gX2NvbnRleHQ5WyJjYXRjaCJdKDApOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0OS50MCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgc3RhdHVzOiAiZmFpbGVkIiwKICAgICAgICAgICAgICByZXNwb25zZTogbnVsbAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlOSwgbnVsbCwgW1swLCAxOF1dKTsKICB9KSk7CiAgcmV0dXJuIF9yZWdpc3Rlck5GVFNhbGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IHsgZ2V0V2ViM1Byb3ZpZGVyLCBjb25uZWN0TWV0YW1hc2ssIGFjY291bnRDaGFuZ2VMaXN0ZW5lciwgZ2V0QmFsYW5jZSwgZ2V0TmZ0TWV0YWRhdGEsIGNyZWF0ZU5GVCwgYWRkTWludGVyLCByZW1vdmVNaW50ZXIsIGFwcHJvdmVORlQsIHJlZ2lzdGVyTkZUU2FsZSB9Ow=="},{"version":3,"sources":["/Users/xufei/Desktop/FlowModel/src/api/web3/contracts.js"],"names":["ethers","FlowInsightERC721NFT","FlowInsightVault","FlowInsightMarketplace","contract_address","marketplace_address","vault_address","contract","vault","marketplace","getWeb3Provider","window","web3Provider","ethereum","providers","Web3Provider","connectMetamask","provider","request","method","account","chainId","Contract","abi","getSigner","status","console","error","accountChangeListener","fn","on","getNftMetadata","id","getNFTMetadata","tx","response","getBalance","address","balance","utils","formatEther","createNFT","to","name","picURL","desc","property","key","privURL","wait","eventFilter","filters","NFTCreated","queryFilter","blockNumber","events","args","toString","owner","addMinter","user","removeMinter","Listen","_FlowInsightId","_to","log","approveNFT","setApprovalForAll","ApprovalForAll","operator","state","registerNFTSale","nftId","Number","Approval","approved"],"mappings":"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","sourcesContent":["import { ethers } from 'ethers';\nimport FlowInsightERC721NFT from \"./FlowInsightERC721NFT.json\";\nimport FlowInsightVault from \"./FlowInsightVault.json\";\nimport FlowInsightMarketplace from \"./FlowInsightMarketplace.json\";\n\nconst contract_address = \"0x6C3838C66770927e0eeC57fCa550B1d651e5da8e\";\nconst marketplace_address = \"0x2528A191640638DcF6FafeE51E95946EE374C641\";\nconst vault_address = \"0xDD495cB2Cd7BFA616eB1F74A70E47F5c8f299BDf\";\n\nlet contract = null;\nlet vault = null;\nlet marketplace = null;\n//获取 metamask provider\nfunction getWeb3Provider() {\n\n    if (!window.web3Provider) {\n        if (!window.ethereum) {\n            return null;\n        }\n        window.web3Provider = new ethers.providers.Web3Provider(window.ethereum, \"any\");\n    }\n    return window.web3Provider;\n\n\n}\n//连接metamask\nasync function connectMetamask(provider) {\n    if (provider === null) {\n        return false;\n    }\n    try {\n        // 获取当前连接的账户地址:\n        let account = await window.ethereum.request({\n            method: 'eth_requestAccounts',\n        });\n        // 获取当前连接的链ID:\n        let chainId = await window.ethereum.request({\n            method: 'eth_chainId'\n        });\n        contract = new ethers.Contract(contract_address, FlowInsightERC721NFT.abi, window.web3Provider.getSigner());\n        vault = new ethers.Contract(vault_address, FlowInsightVault.abi, window.web3Provider.getSigner());\n        marketplace = new ethers.Contract(marketplace_address, FlowInsightMarketplace.abi, window.web3Provider.getSigner());\n        return { account: account, chainId: chainId, status: true };\n    } catch (e) {\n        console.error('could not get a wallet connection.', e);\n        return false;\n    }\n}\n//监听账户切换\nfunction accountChangeListener(fn) {\n    window.ethereum.on('accountsChanged', fn)\n}\n//获取对应id nft元数据\nasync function getNftMetadata(id) {\n    let tx = await contract.getNFTMetadata(id);\n    if (tx != \"\") {\n        return { status: \"successed\", response: tx };\n    } else {\n        return { status: \"failed\", response: null };\n    }\n\n}\n//获取账户余额\nasync function getBalance(address) {\n    const balance = await window.web3Provider.getBalance(address)\n    return ethers.utils.formatEther(balance);\n}\n\n//创建nft\nasync function createNFT(to, name, picURL, desc, property, key, privURL) {\n    try {\n        let tx = await contract.createNFT(to, name, picURL, desc, property, key, privURL);\n        tx = await tx.wait();\n\n        let eventFilter = contract.filters.NFTCreated();\n        let events = await contract.queryFilter(eventFilter, tx.blockNumber, \"latest\");\n\n        return { status: \"success\", response: {id: events[0].args[0].toString(), owner: events[0].args[1]}};\n    } catch (e) {\n        console.error(e);\n        return { status: \"failed\", response: null }\n    }\n}\n//添加\nasync function addMinter(user) {\n    try {\n        let tx = await contract.addMinter(user);\n        return { status: \"successed\", response: tx }\n    } catch (e) {\n        return { status: \"failed\", response: null }\n    }\n}\n//移除\nasync function removeMinter(user) {\n    try {\n        let tx = await contract.addMinter(user);\n        return { status: \"successed\", response: tx }\n    } catch (e) {\n        return { status: \"failed\", response: null }\n    }\n}\n\n// TODO (Xufei) 把上面 createNFT 监听部分和这里的整合成一份代码\n// 监听事件\nasync function Listen(contract) {\n    contract.on(\"NFTCreated\", (_FlowInsightId, _to) => {\n        console.log(\"id:\", _FlowInsightId.toString(), \"; to:\", _to);\n        let id = _FlowInsightId.toString();\n        let owner = _to;\n        console.log(\"1\",id, owner);\n        return {id: id, owner: owner};\n    });\n}\n\nasync function approveNFT() {\n    try {\n        let tx = await contract.setApprovalForAll(marketplace_address, true);\n        tx = await tx.wait();\n\n        let eventFilter = contract.filters.ApprovalForAll();\n        let events = await contract.queryFilter(eventFilter, tx.blockNumber, \"latest\");\n\n        return { status: \"success\", response: {owner: events[0].args[0], operator: events[0].args[1], state: events[0].args[2]}};\n    } catch (e) {\n        console.error(e);\n        return { status: \"failed\", response: null }\n    }\n}\nasync function registerNFTSale(nftId) {\n    try {\n        console.log(\"000\");\n        let tx = await marketplace.registerNFTSale(Number(nftId));\n        tx = await tx.wait();\n        console.log(\"111\");\n        let eventFilter = contract.filters.Approval();\n        let events = await contract.queryFilter(eventFilter, tx.blockNumber, \"latest\");\n        console.log(\"222\");\n        console.log(\"event:\", events);\n        return { status: \"success\", response: {owner: events[0].args[0], approved: events[0].args[1], nftId: events[0].args[2]}};\n    } catch (e) {\n        console.error(e);\n        return { status: \"failed\", response: null }\n    }\n}\nexport {\n    getWeb3Provider,\n    connectMetamask,\n    accountChangeListener,\n    getBalance,\n    getNftMetadata,\n    createNFT,\n    addMinter,\n    removeMinter,\n    approveNFT,\n    registerNFTSale,\n}"]}]}