{"remainingRequest":"/Users/wangxufei/Desktop/FlowModel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangxufei/Desktop/FlowModel/src/common/GlobalHeader.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangxufei/Desktop/FlowModel/src/common/GlobalHeader.vue","mtime":1652163070444},{"path":"/Users/wangxufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangxufei/Desktop/FlowModel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/wangxufei/Desktop/FlowModel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangxufei/Desktop/FlowModel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgc2V0U3RvcmUsIGdldFN0b3JlIH0gZnJvbSAiLi4vdXRpbHMvc3RvcmFnZSI7CmltcG9ydCB7CiAgY29ubmVjdE1ldGFtYXNrLAogIGFjY291bnRDaGFuZ2VMaXN0ZW5lciwKICBnZXRCYWxhbmNlLAogIGdldE5mdE1ldGFkYXRhLAogIGNyZWF0ZU5GVCwKICBhZGRNaW50ZXIsCiAgZ2V0V2ViM1Byb3ZpZGVyLAp9IGZyb20gIi4uL2FwaS93ZWIzL2NvbnRyYWN0cyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoQ29udGVudDogIiIsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsid2ViM1Byb3ZpZGVyIiwgInVzZXIiXSksCiAgICBzaG9yVXNlcklkKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMudXNlci5zdWJzdHJpbmcoMCwgNSkgKwogICAgICAgICIuLi4iICsKICAgICAgICB0aGlzLnVzZXIuc3Vic3RyaW5nKHRoaXMudXNlci5sZW5ndGggLSA0KQogICAgICApOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWyJzZXRfd2ViM19wcm92aWRlciJdKSwKICAgIC4uLm1hcE11dGF0aW9ucyhbIlNFVF9VU0VSIl0pLAogICAgaW5pdFByb3ZpZGVyKCkgewogICAgICBsZXQgcHJvdmlkZXIgPSBnZXRXZWIzUHJvdmlkZXIoKTsKICAgICAgaWYgKHByb3ZpZGVyID09IG51bGwpIHsKICAgICAgICB0aGlzLiRub3RpZnkud2FybmluZyh7CiAgICAgICAgICB0aXRsZTogIldhcm5pbmciLAogICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBpbnN0YWxsIG1ldGFtYXNrIGZpcnN0ISIsCiAgICAgICAgICBkdXJhdGlvbjogMCwKICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IiwKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLnNldF93ZWIzX3Byb3ZpZGVyKHByb3ZpZGVyKTsKICAgIH0sCiAgICBpbml0VXNlcigpIHsKICAgICAgbGV0IHVzZXIgPSBnZXRTdG9yZSgidXNlciIpOwogICAgICBpZiAodXNlciAmJiB1c2VyLmxlbmd0aCAhPSAwKSB7CiAgICAgICAgdGhpcy5jb25uZWN0KCk7CiAgICAgIH0KICAgIH0sCiAgICBjb25uZWN0KCkgewogICAgICBpZiAodGhpcy53ZWIzUHJvdmlkZXIgPT09IG51bGwpIHsKICAgICAgICBsZXQgcHJvdmlkZXIgPSBnZXRXZWIzUHJvdmlkZXIoKTsKICAgICAgICBpZiAocHJvdmlkZXIgPT0gbnVsbCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICJXYXJuaW5nIiwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBpbnN0YWxsIG1ldGFtYXNrIGZpcnN0ISIsCiAgICAgICAgICAgIGR1cmF0aW9uOiAwLAogICAgICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIsCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZXRfd2ViM19wcm92aWRlcihwcm92aWRlcik7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25uZWN0TWV0YW1hc2sodGhpcy53ZWIzUHJvdmlkZXIpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cykgewogICAgICAgICAgaWYgKHRoaXMudXNlciAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogIlN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICJBY2NvdW50IHN3aXRjaGluZyBzdWNjZWVkZWQhIiwKICAgICAgICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICAgIHRpdGxlOiAiU3VjY2VzcyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIkFjY291bnQgY29ubmVjdCBzdWNjZWVkZWQhIiwKICAgICAgICAgICAgICBwb3NpdGlvbjogImJvdHRvbS1yaWdodCIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuU0VUX1VTRVIocmVzcG9uc2UuYWNjb3VudFswXSk7CgogICAgICAgICAgLy/nlJ/miJDotKbmiLflpLTlg48KICAgICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5hdmF0YXIuc3R5bGUuYmFja2dyb3VuZCA9CiAgICAgICAgICAgICAgImxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIyIgKwogICAgICAgICAgICAgIHJlc3BvbnNlLmFjY291bnRbMF0uc3Vic3RyaW5nKDIsIDgpICsKICAgICAgICAgICAgICAiLCAjIiArCiAgICAgICAgICAgICAgcmVzcG9uc2UuYWNjb3VudFswXS5zdWJzdHJpbmcoOCwgMTQpICsKICAgICAgICAgICAgICAiLCAjIiArCiAgICAgICAgICAgICAgcmVzcG9uc2UuYWNjb3VudFswXS5zdWJzdHJpbmcoMTQsIDIwKSArCiAgICAgICAgICAgICAgIikiOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAiRXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiAiQ29ubmVjdCBmYWlsZWQhIiwKICAgICAgICAgICAgZHVyYXRpb246IDAsCiAgICAgICAgICAgIHBvc2l0aW9uOiAiYm90dG9tLXJpZ2h0IiwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0KCkge30sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0UHJvdmlkZXIoKTsKICAgIGFjY291bnRDaGFuZ2VMaXN0ZW5lcih0aGlzLmNvbm5lY3QpOwogICAgdGhpcy5pbml0VXNlcigpOwogIH0sCn07Cg=="},{"version":3,"sources":["GlobalHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GlobalHeader.vue","sourceRoot":"src/common","sourcesContent":["<template >\n  <div class=\"header-container\">\n    <div class=\"header-box\">\n      <ul class=\"topnav\">\n        <li class=\"logo-box\">\n          <router-link to=\"/explore\">\n            <img src=\"../assets/flowlogo.jpg\" alt=\"logo\" class=\"logo\" />\n          </router-link>\n        </li>\n        <li class=\"search-box\">\n          <div class=\"search-input-outside\">\n            <el-input\n              v-model=\"searchContent\"\n              placeholder=\"Search items\"\n              class=\"serch-input\"\n            ></el-input>\n          </div>\n          <i class=\"el-icon-search search-icon\"></i>\n        </li>\n        <li class=\"connect-button\" v-if=\"user == null\">\n          <el-button round @click=\"connect()\">Connect</el-button>\n        </li>\n        <div class=\"avatar\" v-else>\n          <span class=\"user-short-id\">{{ shorUserId }}</span>\n          <!--<router-link to=\"/profile\">Profile</router-link>\n           <el-avatar icon=\"el-icon-user-solid\" class=\"avatar-icon\"></el-avatar> -->\n          <el-dropdown>\n            <div\n              class=\"avatar-icon\"\n              ref=\"avatar\"\n              style=\"\n                background: linear-gradient(\n                  to right,\n                  #ab506d,\n                  #34a3ad,\n                  #e367dc\n                );\n              \"\n            ></div>\n            <el-dropdown-menu slot=\"dropdown\" class=\"dropdown-menu-in-header\">\n              <el-dropdown-item icon=\"el-icon-user\"\n                ><router-link class=\"profile\" to=\"/profile\"\n                  >Profile</router-link\n                ></el-dropdown-item\n              >\n              <el-dropdown-item icon=\"el-icon-right\" @click=\"logout()\"\n                >Log Out</el-dropdown-item\n              >\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n\n        <router-link tag=\"li\" to=\"/create\" class=\"right\">\n          <span>Create</span>\n        </router-link>\n        <router-link tag=\"li\" to=\"/explore\" class=\"right\">\n          <span>Explore</span>\n        </router-link>\n      </ul>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapState, mapMutations, mapActions } from \"vuex\";\nimport { setStore, getStore } from \"../utils/storage\";\nimport {\n  connectMetamask,\n  accountChangeListener,\n  getBalance,\n  getNftMetadata,\n  createNFT,\n  addMinter,\n  getWeb3Provider,\n} from \"../api/web3/contracts\";\nexport default {\n  data() {\n    return {\n      searchContent: \"\",\n    };\n  },\n  computed: {\n    ...mapState([\"web3Provider\", \"user\"]),\n    shorUserId() {\n      return (\n        this.user.substring(0, 5) +\n        \"...\" +\n        this.user.substring(this.user.length - 4)\n      );\n    },\n  },\n  methods: {\n    ...mapActions([\"set_web3_provider\"]),\n    ...mapMutations([\"SET_USER\"]),\n    initProvider() {\n      let provider = getWeb3Provider();\n      if (provider == null) {\n        this.$notify.warning({\n          title: \"Warning\",\n          message: \"Please install metamask first!\",\n          duration: 0,\n          position: \"bottom-right\",\n        });\n      }\n      this.set_web3_provider(provider);\n    },\n    initUser() {\n      let user = getStore(\"user\");\n      if (user && user.length != 0) {\n        this.connect();\n      }\n    },\n    connect() {\n      if (this.web3Provider === null) {\n        let provider = getWeb3Provider();\n        if (provider == null) {\n          this.$notify({\n            title: \"Warning\",\n            message: \"Please install metamask first!\",\n            duration: 0,\n            position: \"bottom-right\",\n          });\n          return;\n        } else {\n          this.set_web3_provider(provider);\n        }\n      }\n\n      connectMetamask(this.web3Provider).then((response) => {\n        if (response.status) {\n          if (this.user != null) {\n            this.$notify.success({\n              title: \"Success\",\n              message: \"Account switching succeeded!\",\n              position: \"bottom-right\",\n            });\n          } else {\n            this.$notify.success({\n              title: \"Success\",\n              message: \"Account connect succeeded!\",\n              position: \"bottom-right\",\n            });\n          }\n\n          this.SET_USER(response.account[0]);\n\n          //生成账户头像\n          this.$nextTick(function () {\n            this.$refs.avatar.style.background =\n              \"linear-gradient(to right, #\" +\n              response.account[0].substring(2, 8) +\n              \", #\" +\n              response.account[0].substring(8, 14) +\n              \", #\" +\n              response.account[0].substring(14, 20) +\n              \")\";\n          });\n        } else {\n          this.$notify.error({\n            title: \"Error\",\n            message: \"Connect failed!\",\n            duration: 0,\n            position: \"bottom-right\",\n          });\n        }\n      });\n    },\n    logout() {},\n  },\n  mounted() {\n    this.initProvider();\n    accountChangeListener(this.connect);\n    this.initUser();\n  },\n};\n</script>\n<style  scoped lang=\"scss\">\n.header-box {\n  height: 80px;\n  width: 2000px;\n  background-color: #fff;\n  .topnav {\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n\n    position: fixed;\n    z-index: 9999;\n    top: 0;\n    width: 100%;\n    background-color: #fff;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n    .logo {\n      margin: 10px 200px;\n      width: 50px;\n    }\n    .logo-box {\n      img {\n        width: 200px;\n        height: 50px;\n        margin-top: 2.5%;\n      }\n    }\n    .search-box {\n      width: 550px;\n      .search-input-outside {\n          float:left;\n          width: 500px;\n          height: 47px;\n          margin-top: 20px;\n          background: -webkit-linear-gradient(0deg, #37e2f5, #f574f5);\n          border-radius: 10px;\n          .serch-input {\n            width: 490px;\n            float: left;\n            margin-top:4px;\n            margin-left:5px;\n            /deep/ .el-input__inner {\n              border: solid 0px rgb(229, 232, 235);\n              background-color: #fff;\n              border-radius: 6px;\n              margin: 0 auto;\n            }\n          }\n      \n      }\n      .search-icon {\n        float: left;\n        margin-left: 15px;\n        margin-top: 4px;\n        font-size: 25px;\n        font-weight: 600;\n        line-height: 80px;\n        cursor: wait;\n        color: #49e4f5;\n      }\n        .search-icon:hover {\n          color: #b074f5;\n        }\n    }\n\n    li {\n      float: left;\n      margin-right: 30px;\n      span {\n        display: block;\n        text-align: center;\n        padding: 14px 16px;\n        height: 50px;\n        background: -webkit-linear-gradient(left, #49e4f5, #d849f5);\n        -webkit-background-clip: text;\n        -webkit-text-fill-color: transparent;\n        line-height: 50px;\n        text-decoration: none;\n        //color: rgb(0, 0, 0);\n        font-weight: 2000;\n        font-size: 16px;\n        font-family: \"Gill Sans\", \"Gill Sans MT\", Calibri, \"Trebuchet MS\",\n        sans-serif;\n        &:hover {\n          //color: rgb(104, 104, 104);\n          transition: color 0.4s ease 0s;\n          cursor: pointer;\n          background: -webkit-linear-gradient(right, #49e4f5, #d849f5);\n          -webkit-background-clip: text;\n          -webkit-text-fill-color: transparent;\n        }\n      }\n    }\n    .right {\n      float: right;\n    }\n    .connect-button {\n      float: right;\n      margin: 20px 30px 0px 60px;\n      cursor: pointer;\n      .el-button {\n        color: white;\n        border: 0;\n        background: -webkit-linear-gradient(left, #49e4f5, #d849f5);\n      }\n    }\n    .avatar {\n      float: right;\n      .avatar-icon {\n        float: left;\n        margin: 20px 30px 20px 0px;\n        height: 35px;\n        width: 35px;\n        border-radius: 100%;\n        background-color: red;\n        padding: 1px;\n        border: 2px solid rgb(255, 239, 12);\n        cursor: pointer;\n      }\n      .user-short-id {\n        float: left;\n        display: block;\n        margin: 25px 10px 0px 60px;\n        padding: 5px 10px;\n        border: solid 1px #e7e7e7;\n        border-radius: 20px;\n        font-family: \"Gill Sans\", \"Gill Sans MT\", Calibri, \"Trebuchet MS\",\n          sans-serif;\n        font-weight: 600;\n      }\n      /deep/ .el-avatar {\n        background-color: #fff;\n        color: #000;\n      }\n      /deep/ .el-avatar--icon {\n        font-size: 25px;\n      }\n\n      .profile {\n        color: #000;\n      }\n    }\n  }\n}\nul li.router-link-active,\nul li.router-link-exact-active {\n  border-bottom: solid 2px rgb(2, 157, 247);\n}\n</style>\n\n<style lang=\"scss\">\n.dropdown-menu-in-header li {\n  color: black;\n  .router-link-active {\n    text-decoration: none;\n    color: black;\n  }\n  a{\n    text-decoration: none;\n    color: black;\n  }\n}\n</style>"]}]}